---
title: C++åˆå°
date: 2021-11-10 15:26:09
tags: [C++]
---

## C++åˆå°

> é˜…è¯»ç¬”è®°ã€ŠC++ Primer edition 5thã€‹

### chapter 1

```c++
// includeï¼Œè¡¨ç¤ºè¦ä½¿ç”¨æŸä¸ªåº“æˆ–å¤´æ–‡ä»¶
#include <iostream>
#include "Sales_item.h"

// æ ‡å‡†åº“å‘½åç©ºé—´
using namespace std;

int main(){
  // è‡ªå®šä¹‰çš„ç±»ä»¥åŠä¸å…¶å…³è”çš„ä¸€ç»„æ“ä½œ
  Sales_item total;
  // cinï¼Œæ ‡å‡†è¾“å…¥ï¼Œistreamå¯¹è±¡ï¼Œè¾“å…¥æµï¼Œæµçš„æ„æ€æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå­—ç¬¦æ˜¯é¡ºåºç”Ÿæˆå’Œæ¶ˆè€—çš„ã€‚
  if (cin >> total) {
    Sales_item trans;
    while(cin >> trans) {
      if(total.isbn() == trans.isbn()){
        total += trans;
      } else {
        // coutï¼Œæ ‡å‡†è¾“å‡ºï¼Œostreamå¯¹è±¡ï¼Œè¾“å‡ºæµ
        // endlï¼Œæ“çºµç¬¦çš„ç‰¹æ®Šå€¼ï¼Œæ•ˆæœæ˜¯ç»“æŸå½“å‰è¡Œï¼Œå°†ä¸è®¾å¤‡å…³è”çš„ç¼“å†²åŒºå†…å®¹åˆ·åˆ°è®¾å¤‡å½“ä¸­
        cout << total << endl;
        total = trans;
      }
    }
    cout << total << endl;
  } else {
    // è¾“å‡ºé”™è¯¯
    cerr << "There is no data!" << endl;
    return -1;
  }
  return 0;
}
// æ‰§è¡Œ ./main <data/book_sales >res
```

![image-20211110171045345](https://tva1.sinaimg.cn/large/008i3skNgy1gwa64eem78j313w06omyz.jpg)

è¿™ä¸ªè¦å¦‚ä½•ç†è§£ï¼Ÿ

é¦–å…ˆè¦äº†è§£ä¸‹**ç¼“å†²åŒº**çš„å®šä¹‰ï¼Œç¼“å†²åŒºæ˜¯ä¸€å—åœˆå®šçš„å†…å­˜åŒºåŸŸï¼Œ**å®ƒç”¨åœ¨è¾“å…¥è¾“å‡ºè®¾å¤‡å’ŒCPUä¹‹é—´ï¼Œç”¨æ¥ç¼“å­˜æ•°æ®ã€‚å®ƒä½¿å¾—ä½é€Ÿçš„è¾“å…¥è¾“å‡ºè®¾å¤‡å’Œé«˜é€Ÿçš„CPUèƒ½å¤Ÿåè°ƒå·¥ä½œï¼Œé¿å…ä½é€Ÿçš„è¾“å…¥è¾“å‡ºè®¾å¤‡å ç”¨CPUï¼Œè§£æ”¾å‡ºCPUï¼Œä½¿å…¶èƒ½å¤Ÿé«˜æ•ˆç‡å·¥ä½œ**

**cout**æ˜¯è¾“å‡ºæµå¯¹è±¡ï¼Œå®ƒä¼šè‡ªåŠ¨å…³è”ä¸€å—ç¼“å†²åŒºï¼Œè¾“å‡ºçš„æ•°æ®ä¸€å¼€å§‹æ˜¯æ”¾åœ¨ç¼“å†²åŒºçš„ï¼Œåˆ·æ–°ç¼“å†²åŒºæ“ä½œå¯ä»¥å°†ç¼“å†²åŒºçš„æ•°æ®çœŸæ­£åœ°è¾“å‡ºåˆ°è¾“å‡ºè®¾å¤‡ã€‚

```c++
#include <iostream>
using namespace std;

int main(){
  cout << "abcd"; // åœ¨ç¼“å†²åŒº
  cout << endl; // è¾“å‡ºåˆ°è¾“å‡ºè®¾å¤‡
  cout << "def"; // åœ¨ç¼“å†²åŒº
}
// ç¨‹åºç»“æŸï¼Œåˆ·æ–°ç¼“å†²åŒº
```

### chapter2

#### å¦‚ä½•é€‰æ‹©æ­£ç¡®çš„æ•°æ®ç±»å‹ï¼Ÿ

1. å½“æ˜ç¡®æ•°å€¼ä¸å¯èƒ½ä¸ºè´Ÿæ—¶ï¼Œé€‰æ‹©æ— ç¬¦å·ç±»å‹
2. ä½¿ç”¨intæ‰§è¡Œæ•´æ•°è¿ç®—ï¼Œå¦‚æœè¶…å‡ºäº†intçš„è¡¨ç¤ºèŒƒå›´ï¼Œé€‰ç”¨long long
3. ç®—æœ¯è¡¨è¾¾å¼ä¸­ä¸è¦ä½¿ç”¨charæˆ–boolã€‚charç±»å‹åœ¨æŸäº›æœºå™¨ä¸Šæ˜¯æœ‰ç¬¦å·çš„ï¼Œåœ¨å¦ä¸€äº›æœºå™¨ä¸Šåˆæ˜¯æ— ç¬¦å·çš„
4. æ‰§è¡Œæµ®ç‚¹è¿ç®—ç”¨doubleã€‚doubleç²¾åº¦æ›´é«˜ï¼Œä¸”ä¸floatè®¡ç®—ä»£ä»·ç›¸å·®æ— å‡ 

#### ç±»å‹è½¬æ¢

å½“ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼ä¸­æ—¢æœ‰æ— ç¬¦å·æ•°åˆæœ‰intå€¼æ—¶ï¼Œintå€¼ä¼šè½¬æ¢ä¸ºæ— ç¬¦å·æ•°ã€‚

```c++
#include <iostream>

using namespace std;

int main(){
  unsigned u = 10, u2 = 42;
  cout << u2 - u << endl;
  cout << u - u2 << endl; // 4294967264, æœ‰ç¬¦å·æ•°ç›¸å‡ç»“æœä¸º-32ï¼Œå› ä¸ºæ˜¯æ— ç¬¦å·è¡¨ç¤ºï¼Œæ‰€ä»¥å®é™…å€¼ä¸º2^32 - 32ï¼ˆè¡¥ç è¡¨ç¤ºæ³•ï¼‰

  int i = 10, i2 = 42;
  cout << i2 - i << endl;
  cout << i - i2 << endl;


  cout << i - u << endl;
  cout << u - i << endl;

  int i3 = -10;
  cout << i3 - u << endl; // 4294967276
  cout << u + i3 << endl;

  int i4 = -20;
  cout << u + i4 << endl; // 4294967286
  cout << i4 + u << endl; // 4294967286
}
```

#### èŠ±æ‹¬å·åˆå§‹åŒ–ï¼ˆåˆ—è¡¨åˆå§‹åŒ–ï¼‰

åˆ—è¡¨åˆå§‹åŒ–åœ¨C++11åï¼Œå¯ä»¥æ”¯æŒåŒ…æ‹¬åŸºæœ¬ç±»å‹åœ¨å†…çš„æ‰€æœ‰ç±»å‹çš„åˆå§‹åŒ–ã€‚

```c++
#include <iostream>

using namespace std;
class Example {
  public:
    int a;
    int b;
    Example() = default;
    Example(int aIn, int bIn) {
      a = aIn;
      b = bIn;
    };
};
int main() {
  string str("hello");
  string str2 = "world";
  string str3 = {"!"};

  cout << str + str2 + str3 << endl;

  int a = 0.1; // warning çº§åˆ«ï¼Œæ½œåœ¨çš„ç±»å‹è½¬æ¢ï¼Œä¸ä¼šæŠ¥ç¼–è¯‘é”™è¯¯
  // int b = {0.1}; // errorçº§åˆ«ï¼ŒæŠ¥ç¼–è¯‘é”™è¯¯
  
  // class typeä¹Ÿå¯ä»¥ç”¨åˆ—è¡¨åˆå§‹åŒ–
  Example example = {1,1};
  cout << example.a << example.b << endl;
}
```

#### å˜é‡å‘½å

C++æ”¯æŒ**åˆ†ç¦»å¼ç¼–è¯‘**ã€‚

```c++
extern int i; // å£°æ˜å˜é‡iï¼Œä½†æœªè¿›è¡Œå®šä¹‰ï¼Œä¸»è¦ç”¨äºæ–‡ä»¶é—´ä»£ç å…±äº«
int j; // å£°æ˜å¹¶å®šä¹‰
extern int k = 3; // å®šä¹‰
```

#### ä½œç”¨åŸŸ

C++å…è®¸åœ¨å†…å±‚ä½œç”¨åŸŸä¸­é‡æ–°å®šä¹‰å¤–å±‚ä½œç”¨åŸŸä¸­å·²æœ‰çš„åå­—ï¼Œå°†å…¶è¦†ç›–æ‰ã€‚

```c++
int i = 100;
for (int i = 0; i < 10; i++)
{
  cout<<i;
}
```

#### å¤åˆç±»å‹

*å¤åˆç±»å‹æŒ‡åŸºäºå…¶å®ƒç±»å‹å®šä¹‰çš„ç±»å‹*

##### æŒ‡é’ˆå’Œå¼•ç”¨çš„åŒºåˆ«

æŒ‡é’ˆçš„å®šä¹‰ï¼š

Pointers store address of variables or a memory location. 

æŒ‡é’ˆå­˜å‚¨å˜é‡çš„åœ°å€æˆ–æŒ‡å‘ä¸€å—å†…å­˜åœ°å€ã€‚

```c++
  int var = 10;
  int *p = &var;
  cout << *p << endl; // 10
  cout << p << endl; // 0x7ffa0...

  *p = 20;
  cout << var << endl; // 20
```

![image-20211121165847840](https://tva1.sinaimg.cn/large/008i3skNgy1gwmvlekx59j30xo0gwmya.jpg)

æŒ‡é’ˆå¯¹è±¡æ”¯æŒè‡ªå¢ï¼ˆ++ï¼‰ä¸è‡ªå‡ï¼ˆ--ï¼‰æ“ä½œï¼Œå¢åŠ çš„é•¿åº¦ä¸ºæŒ‡é’ˆç±»å‹çš„é•¿åº¦ï¼Œå¦‚intæŒ‡é’ˆå¢åŠ 4

![image-20211121170353544](/Users/jiayi/Library/Application%20Support/typora-user-images/image-20211121170353544.png)

**å¼•ç”¨**çš„å®šä¹‰ï¼š

When a variable is declared as a reference, it becomes an alternative name for an existing variable.

å¼•ç”¨å…¶å®å°±æ˜¯ç»™å·²å­˜åœ¨çš„å¯¹è±¡èµ·äº†ä¸€ä¸ªåˆ«åï¼Œç±»ä¼¼äºâ€œé˜¿é‡Œçš„èŠ±åâ€ğŸ˜ï¼Œç»™é£æ¸…æ‰¬ä¸€æ‹³ï¼Œä¹Ÿè¡¨ç¤ºç»™äº†é©¬äº‘ä¸€æ‹³ã€‚

**å¸¸ç”¨åœºæ™¯**ï¼š

1. **Modify the passed parameters in a function**ï¼Œä¿®æ”¹å‡½æ•°ä¼ å‚

   ```c++
     int a = 1, b = 2;
     swap(a,b);
     cout << a << " " << b << endl;
     void swap(int &a, int &b){
       int tmp = a;
       a = b;
       b = a;
     }
   ```

2. **Avoiding a** **copy of large structures**ï¼Œé¿å…å¤§å¯¹è±¡çš„copyæµªè´¹ç©ºé—´

   åœ¨å‡½æ•°ä¼ é€’æ—¶ï¼Œé€šè¿‡å¼•ç”¨ç±»å‹ï¼Œé¿å…å¤§å¯¹è±¡çš„copy

3. **In For Each Loops to modify all objects**

   åœ¨foreachä¸­ï¼Œä¿®æ”¹å¯¹è±¡

   ```c++
   vector<int> vect{ 10, 20, 30, 40 }; 
   for(int &x:vect) {
     x = x + 5;
   }
   for(int x:vect){
     cout << x; // {15, 25, 35, 45}
   }
   ```

4. **For Each Loop to avoid the** **copy of objects**

   ```c++
   vector<string> strs{"aaabbb", "bbbccc", "cccddd"};
   for(string &str: strs){
     cout << str; // é¿å…è¿›è¡Œå€¼copy
   }
   ```

```c++
 int k, &rk = k; // & è¡¨ç¤ºrkæ˜¯ä¸€ä¸ªreferenceï¼Œå¼•ç”¨å‹å˜é‡ï¼Œrkå¯ä»¥ç†è§£ä¸ºkçš„åˆ«å
  k = 5; rk = 10; //  å¯¹rkè¿›è¡Œæ“ä½œï¼Œä¼šå½±å“åˆ°k
  cout << k << " " << rk << endl;

  int i = 10;
  int *p = nullptr; // ç©ºæŒ‡é’ˆï¼Œ*è¡¨ç¤ºpä¸ºæŒ‡é’ˆå˜é‡
  p = &i; // ç»™æŒ‡é’ˆå˜é‡èµ‹å€¼ï¼Œ&ä¸ºå–åœ°å€ç¬¦å·
  cout << *p << endl; // *ä¸ºè§£å¼•ç”¨ç¬¦ï¼Œå¯¹æŒ‡é’ˆè§£å¼•ç”¨å¯ä»¥å¾—åˆ°æ‰€æŒ‡çš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥è·å¾—i
```

##### Pointer vs Reference

1. å¼•ç”¨åˆå§‹åŒ–**å¿…é¡»è¿›è¡Œèµ‹å€¼**ï¼Œä¸”**ä¸å¯å˜**ï¼ŒæŒ‡é’ˆåˆ™æœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…è®¸å¯¹å®ƒè¿›è¡Œèµ‹å€¼å’Œæ‹·è´ï¼Œ**å¯ä»¥å…ˆåæŒ‡å‘ä¸åŒçš„å¯¹è±¡**ï¼Œå®šä¹‰æ—¶ä¹Ÿ**ä¸é¡»èµ‹åˆå€¼**
2. åœ¨è°ƒç”¨æ ˆä¸Šï¼Œ**æŒ‡é’ˆæœ‰è‡ªå·±çš„åœ°å€å’Œå†…å­˜ç©ºé—´**ï¼Œè€Œå¼•ç”¨ä¸åŸå˜é‡å…±äº«åŒä¸€ä¸ªåœ°å€ã€‚

```c++
int test  = 10, *pt = &test, &rt = test;
cout << &test << " " << &pt << " " << &rt << " " << pt << endl;
// 0x7ffeeca40454 0x7ffeeca40448 0x7ffeeca40454 0x7ffeeca40454
```

1. æŒ‡é’ˆå¯ä»¥æœ‰å¤šçº§ï¼Œè€Œå¼•ç”¨åªæä¾›ä¸€çº§

```c++
int **p; // valid
int &&q;// error
```





